<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magnetic Morphing Blob Cursor - Demo</title>
  <style>
    /* Include the cursor styles */
    @import url('style_updated.css');

    body {
      margin: 0;
      padding: 40px;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1f1f1f 100%);
      color: #E8F0FE;
      min-height: 100vh;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      font-size: 3rem;
      margin-bottom: 2rem;
      background: linear-gradient(135deg, #60D394, #AAF683);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .demo-section {
      margin: 60px 0;
      padding: 40px;
      background: rgba(30, 41, 59, 0.4);
      border-radius: 20px;
      border: 1px solid rgba(138, 180, 248, 0.2);
    }

    .demo-section h2 {
      color: #8AB4F8;
      margin-bottom: 20px;
    }

    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }

    .test-button {
      padding: 20px;
      background: linear-gradient(135deg, #60D394, #AAF683);
      border: none;
      border-radius: 15px;
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      transition: transform 0.3s;
    }

    .test-button:hover {
      transform: translateY(-5px);
    }

    .test-card {
      padding: 30px;
      background: rgba(15, 35, 55, 0.6);
      border: 1px solid rgba(79, 195, 247, 0.25);
      border-radius: 20px;
      transition: all 0.4s;
    }

    .test-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 40px rgba(79, 195, 247, 0.3);
    }

    .test-link {
      display: inline-block;
      padding: 10px 20px;
      color: #4FC3F7;
      text-decoration: none;
      border: 2px solid #4FC3F7;
      border-radius: 25px;
      margin: 10px;
      transition: all 0.3s;
    }

    .test-link:hover {
      background: rgba(79, 195, 247, 0.1);
      transform: scale(1.05);
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .stat-box {
      padding: 20px;
      background: rgba(192, 132, 252, 0.1);
      border: 1px solid rgba(192, 132, 252, 0.3);
      border-radius: 15px;
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #C084FC;
    }

    .stat-label {
      color: #BFDBFE;
      margin-top: 10px;
    }

    .feature-list {
      list-style: none;
      padding: 0;
    }

    .feature-list li {
      padding: 15px;
      margin: 10px 0;
      background: rgba(96, 211, 148, 0.1);
      border-left: 4px solid #60D394;
      border-radius: 8px;
    }

    .color-demo {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin: 20px 0;
    }

    .color-box {
      width: 120px;
      height: 120px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      transition: transform 0.3s;
    }

    .color-box:hover {
      transform: scale(1.1) rotate(5deg);
    }

    .color-primary { background: linear-gradient(135deg, #60D394, #AAF683); }
    .color-secondary { background: linear-gradient(135deg, #FF9B85, #FFD97D); }
    .color-purple { background: linear-gradient(135deg, #C084FC, #E879F9); }
    .color-blue { background: linear-gradient(135deg, #4FC3F7, #8AB4F8); }
  </style>
</head>
<body>
  <!-- SVG Filters for Gooey Effect -->
  <svg style="position: fixed; width: 0; height: 0;">
    <defs>
      <filter id="gooey-cursor">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur"/>
        <feColorMatrix in="blur" mode="matrix" values="
          1 0 0 0 0
          0 1 0 0 0
          0 0 1 0 0
          0 0 0 20 -10" result="gooey"/>
        <feComposite in="SourceGraphic" in2="gooey" operator="atop"/>
      </filter>
    </defs>
  </svg>

  <!-- Magnetic Morphing Blob Cursor -->
  <div id="cursor-container" class="cursor-container">
    <div id="custom-cursor" class="custom-cursor">
      <div class="cursor-blob"></div>
      <div class="cursor-blob blob-2"></div>
      <div class="cursor-blob blob-3"></div>
    </div>
    <div id="cursor-trail"></div>
  </div>

  <div class="demo-container">
    <h1>Magnetic Morphing Blob Cursor Demo</h1>

    <!-- Feature Overview -->
    <div class="demo-section">
      <h2>Features Demonstrated</h2>
      <ul class="feature-list">
        <li>âœ¨ SVG Gooey Filter - Creates liquid merge effects between blob layers</li>
        <li>ðŸ§² Magnetic Attraction - Cursor pulls toward interactive elements</li>
        <li>ðŸŽ¨ Dynamic Color Shifting - Changes based on hovered element</li>
        <li>ðŸ’§ Drip Trail Effect - Occasional particles when moving fast</li>
        <li>ðŸ”„ Physics-Based Movement - Smooth easing with velocity</li>
        <li>ðŸ“± Responsive Design - Automatically disabled on touch devices</li>
      </ul>
    </div>

    <!-- Button Tests -->
    <div class="demo-section">
      <h2>Test 1: Button Interaction</h2>
      <p>Hover over these buttons to see magnetic attraction and color changes</p>
      <div class="test-grid">
        <button class="test-button btn-primary">Primary Button</button>
        <button class="test-button btn-secondary">Secondary Button</button>
        <button class="test-button">Default Button</button>
      </div>
    </div>

    <!-- Card Tests -->
    <div class="demo-section">
      <h2>Test 2: Card Hover Effects</h2>
      <p>Move your cursor near these cards to feel the magnetic pull</p>
      <div class="test-grid">
        <div class="test-card skill-card">
          <h3>Skill Card</h3>
          <p>Watch the cursor grow and morph</p>
        </div>
        <div class="test-card blog-card">
          <h3>Blog Card</h3>
          <p>Color shifts dynamically</p>
        </div>
        <div class="test-card project-card">
          <h3>Project Card</h3>
          <p>Magnetic field effect</p>
        </div>
      </div>
    </div>

    <!-- Link Tests -->
    <div class="demo-section">
      <h2>Test 3: Link Interaction</h2>
      <p>Links also trigger the magnetic effect</p>
      <div>
        <a href="#" class="test-link">Link One</a>
        <a href="#" class="test-link">Link Two</a>
        <a href="#" class="test-link">Link Three</a>
        <a href="#" class="test-link">Link Four</a>
      </div>
    </div>

    <!-- Color Demo -->
    <div class="demo-section">
      <h2>Test 4: Color Adaptation</h2>
      <p>Hover over different colored elements to see cursor adapt</p>
      <div class="color-demo">
        <div class="color-box color-primary btn-primary">Primary</div>
        <div class="color-box color-secondary btn-secondary">Secondary</div>
        <div class="color-box color-purple tag">Purple</div>
        <div class="color-box color-blue">Blue</div>
      </div>
    </div>

    <!-- Drip Trail Test -->
    <div class="demo-section">
      <h2>Test 5: Drip Trail Effect</h2>
      <p>Move your mouse quickly across this area to see drip particles fall</p>
      <div style="height: 200px; background: rgba(0,0,0,0.3); border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-top: 20px;">
        <h3>Swipe Fast Here! â†’</h3>
      </div>
    </div>

    <!-- Performance Stats -->
    <div class="demo-section">
      <h2>Performance Metrics</h2>
      <div class="stats">
        <div class="stat-box">
          <div class="stat-value">60 FPS</div>
          <div class="stat-label">Frame Rate</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">&lt;5%</div>
          <div class="stat-label">CPU Usage</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">3 Layers</div>
          <div class="stat-label">Blob Elements</div>
        </div>
        <div class="stat-box">
          <div class="stat-value">150ms</div>
          <div class="stat-label">Drip Interval</div>
        </div>
      </div>
    </div>

    <!-- Instructions -->
    <div class="demo-section">
      <h2>How It Works</h2>
      <p><strong>Magnetic Attraction:</strong> The cursor detects all interactive elements and calculates the distance to each. When within the magnetic radius, it applies a pull force proportional to the proximity.</p>
      <p><strong>Gooey Effect:</strong> SVG filters (feGaussianBlur + feColorMatrix) create organic liquid-merge effects when the three blob layers overlap and move.</p>
      <p><strong>Color Shifting:</strong> JavaScript extracts element types and applies corresponding color gradients to the cursor blobs.</p>
      <p><strong>Physics Movement:</strong> Uses velocity-based smoothing with different friction values for normal vs magnetic states.</p>
    </div>
  </div>

  <!-- Include the cursor JavaScript (inline for demo) -->
  <script>
    // Copy of MagneticBlobCursor from script.js
    class MagneticBlobCursor {
      constructor() {
        this.cursor = null;
        this.cursorTrail = null;
        this.cursorX = 0;
        this.cursorY = 0;
        this.currentX = 0;
        this.currentY = 0;
        this.velocityX = 0;
        this.velocityY = 0;
        this.isMagnetic = false;
        this.isHovering = false;
        this.magneticElements = [];
        this.lastDripTime = 0;
        this.dripInterval = 150;

        this.friction = 0.15;
        this.magneticFriction = 0.25;
        this.magneticStrength = 0.4;
        this.springiness = 0.03;
      }

      init() {
        this.cursor = document.getElementById('custom-cursor');
        this.cursorTrail = document.getElementById('cursor-trail');

        if (!this.cursor) {
          console.error('Cursor element not found!');
          return;
        }

        console.log('Magnetic Blob Cursor Demo initialized');
        this.setupEventListeners();
        this.initMagneticElements();
        this.animate();
      }

      setupEventListeners() {
        document.addEventListener('mousemove', (e) => {
          this.cursorX = e.clientX;
          this.cursorY = e.clientY;
          this.checkMagneticAttraction();
        });

        document.addEventListener('mousedown', () => {
          this.cursor.classList.add('click-active');
          setTimeout(() => this.cursor.classList.remove('click-active'), 300);
        });

        window.addEventListener('scroll', () => this.updateMagneticPositions());
        window.addEventListener('resize', () => {
          this.updateMagneticPositions();
          this.initMagneticElements();
        });
      }

      initMagneticElements() {
        this.magneticElements = [];
        const selectors = 'a, button, .btn, .test-card, .color-box, .stat-box, .test-link, .btn-primary, .btn-secondary, .tag';

        document.querySelectorAll(selectors).forEach(el => {
          this.magneticElements.push({
            element: el,
            rect: el.getBoundingClientRect(),
            color: this.getElementColor(el)
          });

          el.addEventListener('mouseenter', () => {
            this.isHovering = true;
            this.cursor.classList.add('hover-active');
            this.updateCursorColor(this.getElementColor(el));
          });

          el.addEventListener('mouseleave', () => {
            this.isHovering = false;
            this.cursor.classList.remove('hover-active');
            this.resetCursorColor();
          });
        });
      }

      updateMagneticPositions() {
        this.magneticElements.forEach(item => {
          item.rect = item.element.getBoundingClientRect();
        });
      }

      getElementColor(element) {
        if (element.classList.contains('btn-primary') || element.classList.contains('color-primary')) {
          return 'rgba(96, 211, 148, 0.9)';
        } else if (element.classList.contains('btn-secondary') || element.classList.contains('color-secondary')) {
          return 'rgba(255, 155, 133, 0.9)';
        } else if (element.classList.contains('tag') || element.classList.contains('color-purple')) {
          return 'rgba(192, 132, 252, 0.9)';
        }
        return 'rgba(167, 139, 250, 0.9)';
      }

      updateCursorColor(color) {
        const blobs = this.cursor.querySelectorAll('.cursor-blob');
        blobs.forEach(blob => {
          blob.style.background = `radial-gradient(circle at 30% 30%,
            ${color} 0%,
            rgba(232, 121, 249, 0.85) 40%,
            rgba(96, 211, 148, 0.75) 70%,
            rgba(255, 215, 125, 0.5) 100%)`;
        });
      }

      resetCursorColor() {
        const blobs = this.cursor.querySelectorAll('.cursor-blob');
        blobs.forEach(blob => {
          blob.style.background = '';
        });
      }

      checkMagneticAttraction() {
        let closestDistance = Infinity;
        let closestElement = null;

        this.magneticElements.forEach(item => {
          const rect = item.rect;
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;

          const dx = this.cursorX - centerX;
          const dy = this.cursorY - centerY;
          const distance = Math.sqrt(dx * dx + dy * dy);

          const magneticRadius = Math.max(rect.width, rect.height) * 0.75;

          if (distance < magneticRadius && distance < closestDistance) {
            closestDistance = distance;
            closestElement = { centerX, centerY, distance, magneticRadius };
          }
        });

        if (closestElement) {
          this.isMagnetic = true;
          const strength = 1 - (closestElement.distance / closestElement.magneticRadius);
          const pullX = (closestElement.centerX - this.cursorX) * strength * this.magneticStrength;
          const pullY = (closestElement.centerY - this.cursorY) * strength * this.magneticStrength;

          this.cursorX += pullX;
          this.cursorY += pullY;
        } else {
          this.isMagnetic = false;
        }
      }

      createDrip(x, y) {
        const now = Date.now();
        if (now - this.lastDripTime < this.dripInterval) return;

        this.lastDripTime = now;

        const drip = document.createElement('div');
        drip.className = 'cursor-drip';
        drip.style.left = x + 'px';
        drip.style.top = y + 'px';

        this.cursorTrail.appendChild(drip);

        setTimeout(() => {
          drip.remove();
        }, 1500);
      }

      animate() {
        this.velocityX = this.cursorX - this.currentX;
        this.velocityY = this.cursorY - this.currentY;

        const friction = this.isMagnetic ? this.magneticFriction : this.friction;
        this.currentX += this.velocityX * friction;
        this.currentY += this.velocityY * friction;

        const halfWidth = this.cursor.offsetWidth / 2;
        const halfHeight = this.cursor.offsetHeight / 2;

        this.cursor.style.left = (this.currentX - halfWidth) + 'px';
        this.cursor.style.top = (this.currentY - halfHeight) + 'px';

        const speed = Math.sqrt(this.velocityX ** 2 + this.velocityY ** 2);
        if (speed > 5 && Math.random() > 0.92) {
          this.createDrip(this.currentX, this.currentY);
        }

        const rotation = Math.atan2(this.velocityY, this.velocityX) * (180 / Math.PI);
        this.cursor.style.transform = `rotate(${rotation}deg)`;

        requestAnimationFrame(() => this.animate());
      }
    }

    // Initialize
    let blobCursor;
    document.addEventListener('DOMContentLoaded', () => {
      if (window.matchMedia('(hover: hover) and (pointer: fine)').matches) {
        blobCursor = new MagneticBlobCursor();
        blobCursor.init();
      }
    });
  </script>
</body>
</html>
